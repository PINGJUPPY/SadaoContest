<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SADAO MED-TECH 2026</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@300;400;600;700&family=Orbitron:wght@500;700&family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>

    <style>
        :root { --primary: #00f2ff; --secondary: #00ff88; --bg-dark: #050a10; --panel-bg: rgba(10, 20, 35, 0.95); }
        body { font-family: 'Chakra Petch', sans-serif; background-color: var(--bg-dark); color: #e0e0e0; min-height: 100vh; padding-bottom: 60px; background-image: radial-gradient(circle at 50% 10%, #1a2a44 0%, var(--bg-dark) 70%); }
        
        @keyframes logo-float { 0% { transform: translateY(0px); filter: drop-shadow(0 0 10px rgba(0, 242, 255, 0.3)); } 50% { transform: translateY(-10px); filter: drop-shadow(0 0 25px rgba(0, 242, 255, 0.8)); } 100% { transform: translateY(0px); filter: drop-shadow(0 0 10px rgba(0, 242, 255, 0.3)); } }
        .logo-anim { animation: logo-float 3s ease-in-out infinite; }
        
        .tech-panel { background: var(--panel-bg); border: 1px solid rgba(0,242,255,0.2); border-radius: 12px; backdrop-filter: blur(10px); box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        .neon-text { color: var(--primary); text-shadow: 0 0 8px rgba(0,242,255,0.4); font-family: 'Orbitron'; }
        .btn-cyber { background: rgba(0,242,255,0.1); border: 1px solid var(--primary); color: var(--primary); transition: 0.3s; }
        .btn-cyber:hover { background: var(--primary); color: #000; box-shadow: 0 0 15px var(--primary); }
        
        .cat-card { cursor: pointer; transition: 0.2s; padding: 15px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
        .cat-card:hover { border-color: var(--secondary); background: rgba(0,255,136,0.1); transform: translateY(-3px); }
        
        /* Contestant Card Styles */
        .card-player { border-left: 4px solid #555; margin-bottom: 10px; padding: 12px; background: rgba(255,255,255,0.03); transition: 0.3s; }
        .card-player.active { border-left-color: var(--secondary); background: rgba(0,255,136,0.05); }
        .card-player.voted-by-me { border-right: 4px solid var(--primary); }
        
        .seq-num { font-family: 'Orbitron'; font-size: 1.2rem; color: #666; width: 35px; display: inline-block; text-align: center; font-weight: bold; }
        .active .seq-num { color: var(--secondary); text-shadow: 0 0 5px var(--secondary); }
        
        .voter-list { font-size: 0.7rem; color: #888; margin-top: 5px; }
        .voter-tag { display: inline-block; background: #222; padding: 1px 6px; border-radius: 4px; margin-right: 3px; border: 1px solid #444; }
        .voter-tag.me { border-color: var(--primary); color: var(--primary); }
        
        .level-badge { font-size: 0.65rem; background: #333; padding: 2px 5px; border-radius: 4px; }
        .input-cyber { background: #111; border: 1px solid #444; color: #fff; width: 100%; padding: 8px; margin-bottom: 10px; }
        .group-title { color: var(--secondary); border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; margin: 20px 0 10px 0; font-size: 0.9rem; letter-spacing: 1px; }

        #login-container { height: 100vh; display: flex; align-items: center; justify-content: center; z-index: 1000; }
        #app-container { display: none; }
        .dev-credit { position: fixed; bottom: 5px; width: 100%; text-align: center; font-size: 0.7rem; color: rgba(255,255,255,0.2); pointer-events: none; }
        
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
        .live-dot { display: inline-block; width: 6px; height: 6px; background: var(--secondary); border-radius: 50%; animation: blink 1s infinite; margin-right: 5px; }
        
        @media print { body * { visibility: hidden; } #print-area, #print-area * { visibility: visible; } #print-area { position: absolute; left: 0; top: 0; width: 100%; background: white; color: black; padding: 20px; } }
    </style>
</head>
<body>

    <div id="login-container">
        <div class="tech-panel p-5 text-center" style="max-width: 400px; width: 90%;">
            <img src="https://raw.githubusercontent.com/PINGJUPPY/SadaoContest/refs/heads/main/SDH%20LOGO.png" class="logo-anim" style="max-width:120px; margin-bottom:20px;">
            <h3 class="neon-text mb-4">ACCESS CONTROL</h3>
            <input id="user" class="form-control bg-dark text-light mb-3" placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å User">
            <input id="pass" type="password" class="form-control bg-dark text-light mb-3" placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Password">
            <button class="btn-cyber w-100" onclick="doLogin()">LOGIN SYSTEM</button>
        </div>
    </div>

    <div id="app-container">
        <nav class="navbar navbar-dark bg-transparent border-bottom border-secondary mb-3 p-2">
            <div class="container-fluid">
                <span class="navbar-brand neon-text d-flex align-items-center" style="font-size:1rem;">
                    <img src="https://raw.githubusercontent.com/PINGJUPPY/SadaoContest/refs/heads/main/SDH%20LOGO.png" class="logo-anim me-2" style="height:35px;">
                    SADAO MED-TECH
                </span>
                <div class="d-flex align-items-center gap-2">
                    <small class="text-secondary d-none d-md-block me-2" style="font-size:0.7rem;"><span class="live-dot"></span><span id="update-time">--:--</span></small>
                    <small class="text-info d-none d-md-block me-2" id="user-display"></small>
                    <button class="btn btn-sm btn-outline-light" onclick="printReport()"><i class="fa-solid fa-print"></i></button>
                    <button class="btn btn-sm btn-outline-danger" onclick="doLogout()"><i class="fa-solid fa-power-off"></i></button>
                </div>
            </div>
        </nav>

        <div id="admin-toolbar" class="container mb-3 d-none">
            <div class="d-flex justify-content-center gap-2 flex-wrap">
                <button class="btn btn-sm btn-outline-info" onclick="addNewContestant()"><i class="fa-solid fa-plus"></i> ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>
                <button class="btn btn-sm btn-outline-success" onclick="addJudge()"><i class="fa-solid fa-user-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£</button>
                <button class="btn btn-sm btn-outline-warning" onclick="toggleEditMode()"><i class="fa-solid fa-sort"></i> ‡∏à‡∏±‡∏î‡∏Ñ‡∏¥‡∏ß</button>
            </div>
        </div>

        <section id="view-dashboard" class="container">
            <div id="dashboard-content"></div>
        </section>

        <section id="view-list" class="container" style="display:none;">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <button class="btn btn-sm btn-outline-light" onclick="goHome()"><i class="fa-solid fa-arrow-left"></i> BACK</button>
                <h6 class="neon-text m-0 text-truncate ms-2" id="cat-title"></h6>
                <div style="width:30px"></div>
            </div>
            <div id="contestant-container"></div>
        </section>

        <section id="view-rank" class="container mt-4 mb-5">
            <div class="tech-panel p-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h6 class="neon-text m-0"><i class="fa-solid fa-chart-simple"></i> RANKING (AVERAGE)</h6>
                    <select id="rank-level-filter" class="form-select form-select-sm bg-dark text-light w-auto" style="font-size:0.7rem" onchange="updateRank()">
                        <option value="All">‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö</option>
                        <option value="Hospital">‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</option>
                        <option value="HPH">‡∏£‡∏û.‡∏™‡∏ï.</option>
                        <option value="DHO">‡∏™‡∏™‡∏≠.</option>
                    </select>
                </div>
                <table class="table table-dark table-sm bg-transparent" style="font-size:0.8rem">
                    <thead><tr class="text-info"><th>#</th><th>TEAM</th><th>AVG SCORE</th></tr></thead>
                    <tbody id="rank-body"></tbody>
                </table>
            </div>
        </section>
    </div>

    <div class="dev-credit">‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢ ‡∏ô‡∏≤‡∏¢‡∏ó‡∏®‡∏û‡∏£ ‡∏Ñ‡∏á‡∏™‡∏∏‡∏Ç‡∏ô‡∏¥‡∏£‡∏±‡∏ô‡∏î‡∏£‡πå ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÅ‡∏ú‡∏ô‡πÑ‡∏ó‡∏¢</div>
    <div id="print-area" style="display:none;"></div>

    <script>
        // üî¥üî¥ URL üî¥üî¥
        const API_URL = "https://script.google.com/macros/s/AKfycbyGtY1FBwTvk0ng7eOcGJ_cs9mZt-6jC9WoOAWhp1d6YHSTpd3HDJImdae3dFxMvfRv7Q/exec";

        // Config
        const CATS = {
            'Oral_Research': { label: 'Oral: ‡∏ß‡∏¥‡∏à‡∏±‡∏¢', group: 'Oral' },
            'Oral_R2R': { label: 'Oral: R2R', group: 'Oral' },
            'Oral_CQI_Clinic': { label: 'Oral: CQI (Clinic)', group: 'Oral' },
            'Oral_CQI_NonClinic': { label: 'Oral: CQI (Non-Clinic)', group: 'Oral' },
            'Poster_Research': { label: 'Poster: ‡∏ß‡∏¥‡∏à‡∏±‡∏¢', group: 'Poster' },
            'Poster_R2R': { label: 'Poster: R2R', group: 'Poster' },
            'Poster_Innovation': { label: 'Poster: ‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°', group: 'Poster' },
            'Photo_Service': { label: 'Photo: ‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£', group: 'Photo' },
            'Photo_Community': { label: 'Photo: ‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô', group: 'Photo' },
            'ShortFilm': { label: '‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏±‡πâ‡∏ô', group: 'Film' }
        };
        const LEVELS = ['Hospital', 'HPH', 'DHO']; 
        const CRITERIA = {
            'Oral_Research': [ {n:'‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á/‡∏ó‡∏µ‡πà‡∏°‡∏≤', m:15}, {n:'‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå', m:15}, {n:'‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏ß‡∏¥‡∏ò‡∏µ‡∏ß‡∏¥‡∏à‡∏±‡∏¢', m:15}, {n:'‡∏ú‡∏•/‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå', m:15}, {n:'‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏†‡∏≤‡∏û', m:5}, {n:'‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå', m:10}, {n:'‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°', m:5}, {n:'‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå', m:20} ],
            'Default': [{n:'‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°', m:100}]
        };

        let currentUser = null, allData = [], allVotes = {}, currentCat = '', isEditMode = false, syncInterval = null, wakeLock = null;

        window.onload = () => {
            const saved = localStorage.getItem('sadao_user_v3');
            if(saved) { currentUser = JSON.parse(saved); bootSystem(); }
        };

        // --- Wake Lock (Screen Always On) ---
        async function requestWakeLock() {
            try { wakeLock = await navigator.wakeLock.request('screen'); console.log('Screen Wake Lock Active'); } 
            catch (err) { console.log(`${err.name}, ${err.message}`); }
        }
        document.addEventListener('visibilitychange', async () => { if (wakeLock !== null && document.visibilityState === 'visible') requestWakeLock(); });

        function doLogin() {
            const u = document.getElementById('user').value;
            const p = document.getElementById('pass').value;
            Swal.fire({title:'Connecting...', didOpen:()=>Swal.showLoading()});
            fetch(`${API_URL}?action=login&u=${u}&p=${p}`).then(res=>res.json()).then(data=>{
                if(data.status==='success'){ 
                    currentUser=data.user; 
                    localStorage.setItem('sadao_user_v3',JSON.stringify(currentUser)); 
                    bootSystem(); Swal.close(); 
                } else Swal.fire('Error','Login Failed','error');
            });
        }
        function doLogout() { localStorage.removeItem('sadao_user_v3'); location.reload(); }
        
        function bootSystem() {
            document.getElementById('login-container').style.display='none'; 
            document.getElementById('app-container').style.display='block';
            document.getElementById('user-display').innerText = currentUser.name;
            if(currentUser.role==='Admin') document.getElementById('admin-toolbar').classList.remove('d-none');
            
            requestWakeLock(); // ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÑ‡∏°‡πà‡∏î‡∏±‡∏ö
            fetchData();
            if(syncInterval) clearInterval(syncInterval);
            syncInterval = setInterval(() => { if(!isEditMode) fetchData(true); }, 5000);
        }

        async function fetchData(isAuto = false) {
            if(!isAuto) Swal.showLoading();
            try {
                const res = await fetch(`${API_URL}?action=getData`);
                const json = await res.json();
                allData = json.contestants || [];
                allVotes = json.votes || {}; // ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï‡∏°‡∏≤‡∏î‡πâ‡∏ß‡∏¢
                
                setupDashboard();
                updateRank();
                if(document.getElementById('view-list').style.display==='block') renderList();
                
                let now = new Date();
                document.getElementById('update-time').innerText = now.toTimeString().split(' ')[0];
                if(!isAuto) Swal.close();
            } catch(e) {}
        }

        // --- UI Rendering ---
        function setupDashboard() {
            const container = document.getElementById('dashboard-content'); container.innerHTML = '';
            const GROUPS = ['Oral', 'Poster', 'Photo', 'Film'];
            GROUPS.forEach(g => {
                let catsInGroup = Object.keys(CATS).filter(k => CATS[k].group === g);
                let visible = catsInGroup.filter(k => currentUser.role==='Admin' || currentUser.categories.includes(CATS[k].group));
                if(visible.length > 0) {
                    let html = `<div class="group-title">${g}</div><div class="row g-2">`;
                    visible.forEach(k => html += `<div class="col-6 col-md-4"><div class="tech-panel cat-card" onclick="openCat('${k}')"><div style="font-size:0.85rem">${CATS[k].label}</div></div></div>`);
                    container.innerHTML += html + `</div>`;
                }
            });
        }
        function openCat(k) { currentCat=k; document.getElementById('view-dashboard').style.display='none'; document.getElementById('view-list').style.display='block'; document.getElementById('cat-title').innerText=CATS[k].label; renderList(); }
        function goHome() { document.getElementById('view-list').style.display='none'; document.getElementById('view-dashboard').style.display='block'; fetchData(); }

        function renderList() {
            const cont = document.getElementById('contestant-container'); cont.innerHTML='';
            let list = allData.filter(r => r[3] === currentCat);
            if(list.length===0) { cont.innerHTML='<div class="text-center text-muted py-5">NO DATA</div>'; return; }
            
            list.forEach((r, idx) => {
                let id = r[0];
                let active = r[5] === 'Active';
                
                // Check Voting Status
                let voters = allVotes[id] || [];
                let iVoted = voters.includes(currentUser.name);
                let votedHtml = '';
                if(voters.length > 0) {
                    votedHtml = `<div class="voter-list"><i class="fa-solid fa-check-double me-1"></i>`;
                    voters.forEach(v => {
                        let isMe = v === currentUser.name;
                        votedHtml += `<span class="voter-tag ${isMe?'me':''}">${isMe?'You':v}</span>`;
                    });
                    votedHtml += `</div>`;
                }

                cont.innerHTML += `
                <div class="tech-panel card-player ${active?'active':''} ${iVoted?'voted-by-me':''}" data-id="${id}">
                    <div class="d-flex align-items-center">
                        <div class="drag-handle me-2 ${isEditMode?'':'d-none'}" style="cursor:move;color:var(--primary)">‚ò∞</div>
                        <div class="seq-num">${idx+1}</div> <div class="flex-grow-1 ps-2" style="overflow:hidden;">
                            ${active?'<span class="badge bg-success mb-1">ON STAGE</span>':''}
                            <div class="fw-bold text-truncate">${r[1]}</div>
                            <div class="small text-muted text-truncate">${r[2]}</div>
                            <span class="level-badge">${r[7]}</span> <small class="text-info">${r[4]}</small>
                            ${votedHtml}
                        </div>
                        <button class="btn btn-sm ${iVoted?'btn-outline-secondary':'btn-cyber'} ms-2" onclick="openScore('${id}','${r[1]}')">
                            ${iVoted?'EDIT':'VOTE'}
                        </button>
                    </div>
                </div>`;
            });
            if(sortableInstance) sortableInstance.destroy();
            sortableInstance = new Sortable(cont, { handle: '.drag-handle', disabled: !isEditMode, onEnd: saveOrder });
        }

        // --- Admin: Add Judge ---
        async function addJudge() {
            const { value: form } = await Swal.fire({
                title: '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà', background:'#111', color:'#fff',
                html: `
                    <input id="j-user" class="input-cyber" placeholder="Username">
                    <input id="j-pass" class="input-cyber" placeholder="Password">
                    <input id="j-name" class="input-cyber" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏• ‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£">
                    <div class="text-start small text-muted mb-1">‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á (‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢ ,) ‡πÄ‡∏ä‡πà‡∏ô Oral,Poster</div>
                    <input id="j-cats" class="input-cyber" value="Oral,Poster,Photo,Film">
                `,
                preConfirm: () => ({
                    u: document.getElementById('j-user').value,
                    p: document.getElementById('j-pass').value,
                    name: document.getElementById('j-name').value,
                    cats: document.getElementById('j-cats').value
                })
            });
            if(form && form.u) {
                Swal.showLoading();
                fetch(`${API_URL}?action=addJudge&u=${form.u}&p=${form.p}&name=${form.name}&cats=${form.cats}`)
                .then(()=>{ Swal.fire('Success','‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß','success'); });
            }
        }

        // --- Scoring ---
        async function openScore(id, title) {
            let list = CRITERIA[currentCat] || CRITERIA['Default'];
            let html = `<div id="sc-box">`;
            list.forEach((c,i)=> html+=`<div class="d-flex justify-content-between mb-2 align-items-center"><span class="small text-info">${c.n} (${c.m})</span><input type="number" id="s${i}" class="input-cyber text-center" style="width:60px" min="0" max="${c.m}" oninput="if(value>${c.m})value=${c.m};calc()"></div>`);
            html += `</div><div class="text-end h5 text-primary mt-3">‡∏£‡∏ß‡∏°: <span id="sum">0</span></div>`;
            
            const {isConfirmed} = await Swal.fire({
                title: title, html: html, background:'#111', color:'#fff', showCancelButton:true, confirmButtonText:'SUBMIT', confirmButtonColor:'#00f2ff',
                didOpen: calc // Recalc on open
            });

            if(isConfirmed) {
                let total=0, det="";
                list.forEach((c,i)=>{ let v=Number(document.getElementById(`s${i}`).value)||0; total+=v; det+=`[${c.n}:${v}]`; });
                Swal.fire({title:'Sending...',didOpen:()=>Swal.showLoading()});
                fetch(`${API_URL}?action=submitScore&id=${id}&judge=${currentUser.name}&score=${total}&detail=${det}`).then(()=>{ Swal.fire('Saved'); fetchData(true); });
            }
        }
        window.calc = function() { let s=0; document.querySelectorAll('#sc-box input').forEach(i=>s+=Number(i.value)||0); document.getElementById('sum').innerText=s; }

        // --- Rank & Other ---
        function updateRank() {
            const f = document.getElementById('rank-level-filter').value;
            const b = document.getElementById('rank-body'); b.innerHTML='';
            let d = [...allData].filter(r=>(f==='All'||r[7]===f)).sort((a,b)=>(b[6]||0)-(a[6]||0)).slice(0,5);
            d.forEach((r,i)=> b.innerHTML+=`<tr><td><span class="badge bg-dark border border-secondary">${i+1}</span></td><td><div class="text-truncate" style="max-width:150px">${r[1]}</div></td><td class="text-end text-primary fw-bold">${Number(r[6]).toFixed(2)}</td></tr>`);
        }
        async function addNewContestant() {
             /* ...‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°... */
        }
        function toggleEditMode() { isEditMode=!isEditMode; renderList(); }
        function saveOrder() { const ids = Array.from(document.querySelectorAll('.card-player')).map(e=>e.getAttribute('data-id')); fetch(`${API_URL}?action=updateOrder&ids=${ids.join(',')}`); }
        function printReport() {
            /* ...‡πÇ‡∏Ñ‡πâ‡∏î Print ‡πÄ‡∏î‡∏¥‡∏°... */
        }
    </script>
</body>
</html>
